<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Illusory stillness]]></title>
  <link href="http://crowding.github.io/atom.xml" rel="self"/>
  <link href="http://crowding.github.io/"/>
  <updated>2014-09-23T23:16:11-07:00</updated>
  <id>http://crowding.github.io/</id>
  <author>
    <name><![CDATA[Peter Meilstrup]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Racket and Flycheck-mode]]></title>
    <link href="http://crowding.github.io/blog/2014/09/20/racket-and-flycheck-mode/"/>
    <updated>2014-09-20T16:26:23-07:00</updated>
    <id>http://crowding.github.io/blog/2014/09/20/racket-and-flycheck-mode</id>
    <content type="html"><![CDATA[<p>From <a href="{*post-url%202014-09-05-get-emacs-set-up-for-racket.markdown*}">earlier</a>, I had the following complaints about flycheck:</p>

<!-- more -->


<blockquote><p>As I edit code I&rsquo;m getting this annoyingly big message in the minibuffer:</p>

<p>&#8220;`
Checker racket returned non-zero exit code 1, but no errors from output: r5rs:body: no expression in body
  in: (r5rs:body (define (new-record data) attach-tag data) (define (get-record name) (new-record data)) (define (get-salary record) (quote salary)))
  context&hellip;:
   /Applications/Racket v6.1/share/pkgs/r5rs-lib/r5rs/main.rkt:335:2</p>

<p>Checker definition probably flawed.
&#8220;`</p>

<p>In other words, one kind of syntax error (no expression on body) is not getting interpreted as an &ldquo;error&rdquo;.</p></blockquote>

<p>To fix this, I need to fix the error patterns that Racket checker uses, to make it catch a certain error as an error.</p>

<p>Now, what is some example output from the racket compiler? I ran <code>M-! racket -f chap3.1.rkt</code> and went to the <code>*Shell Command Output*</code> buffer.</p>

<p>I will play with regexp-builder on that, but how do I add error patterns to the existing thing?</p>

<p>Additionally, I find that the error highlighting is one character off. Racket reporting zero-based colukmn numbers or something. Also the entire following sexp should be underlined (as opposed to underlining a single paren.)</p>

<h3>more advanced syntax checking?</h3>

<p>Well, Racket actually <a href="http://docs.racket-lang.org/tools/Check_Syntax.html">has a syntax checker module</a>, while this is just reporting the errors on trying to load a file. So how to make emacs talk to <code>drracket/check-syntax</code> package? Apparently one must write a Racket script. I don&rsquo;t know what it is saying about syntax objects. <code>(make-traversal ...)</code> apparently makes a Visitor type thing, but where do I get the visited?</p>

<p><a href="http://docs.racket-lang.org/reference/syntax-model.html#%28part._stxobj-model%29">Syntax objects</a></p>

<p>On the other hand, I don&rsquo;t see the &ldquo;Check Syntax&rdquo; button in DrRacket giving any more information about those pesky &ldquo;no expression in body&rdquo; errors (like a line number would be helpful!)</p>

<p>Okay, put this down for now.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt; (make-traversal (make-base-namespace) "chap3.1.rkt")
</span><span class='line'>#&lt;procedure:expanded-expression&gt;
</span><span class='line'>#&lt;procedure:expansion-completed&gt;</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Actually this particular syntax error (at least when writing code in the <code>#lang planet neil/sicp</code> module) is annoying because it won&rsquo;t point you to the line on which error occurs despite it being mostly syntax. Usually turns out to be an &lsquo;if&rsquo; with no clauses, a duplicated paren, or something.</p>

<p>Additionally, the red underline that flycheck puts is misplaced and tiny (it is frequently on an open paren, when it should really be on all of the first sexp inside that paren).</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fixing Geiser-racket-repl's Error Links]]></title>
    <link href="http://crowding.github.io/blog/2014/09/09/fixing-geiser-racket-repls-error-links/"/>
    <updated>2014-09-09T22:36:52-07:00</updated>
    <id>http://crowding.github.io/blog/2014/09/09/fixing-geiser-racket-repls-error-links</id>
    <content type="html"><![CDATA[<p>Geiser REPL mode is pretty good, but man the error links were (a) broken and (b) eyewatering. Here&rsquo;s an example:</p>

<p>Error processing input, expected syntax: {% img [class name(s)] [http[s]:/]/path/to/image [width [height]] [title text | &ldquo;title text&rdquo; [&ldquo;alt text&rdquo;]] %}</p>

<p>I mean, are there error messages somewhere in all those pathnames and red?</p>

<p>After some fussing I got it to look better.</p>

<!-- more -->


<h3>The fussing</h3>

<p>Anyway, the fontification for errors is hideously wrong: error <em>message</em> should be eyewatering, <em>full path to file</em> should be muted (except for maybe the basename.)</p>

<p>It&rsquo;s seriously impeding my ability to read, so let&rsquo;s&hellip;.</p>

<p>Actually this is a similar problem as with flycheck, perhaps? Let&rsquo;s find the fontification problem first.</p>

<p>&hellip; this is harder than I thought. Why, when I <code>(setq font-lock-keywords nil)</code> then <code>(font-lock-fontify-buffer)</code>, does it
not clear fontification? Ah. I want <code>(font-lock-defontify)</code> No wait, I
actually want <code>(font-lock-unfontify-buffer)</code>. And that makes it clear
that the underlines links are not coming from fontity-buffer. Are they
coming from compilation-mode somehow? Okay, so <code>geiser-repl-mode</code>
calls <code>(compilation-setup)</code> to enter <code>compilation-shell-minor-mode</code> We
have <code>compilation-font-lock-keywords</code> which doesn&rsquo;t seem to have the
keywords.</p>

<p>Ah! It&rsquo;s <code>compilation-error-regexp-alist</code>.</p>

<p>After <a href="2014-09-09-editing-regexes-interactively-in-emacs.html">some futzing around with regex-builder and structured regexes</a> I came to a number of different regexes, like so:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(defadvice geiser-repl--startup (after pbm-geiser-repl-errors activate)
</span><span class='line'>  (message "setting up geiser repl error highlighting")
</span><span class='line'>  (set (make-local-variable 'compilation-error-regexp-alist)
</span><span class='line'>       `(
</span><span class='line'>         ;; &lt;path&gt;:line:col: error message
</span><span class='line'>         ;; &lt;path&gt;: [not a function name]
</span><span class='line'>         (,(rx (seq bol
</span><span class='line'>                    (or "" "   ")
</span><span class='line'>                    (group-n 1
</span><span class='line'>                             (one-or-more (not (any ":\n \t&gt;")))
</span><span class='line'>                             (zero-or-more (not (any ":\n\t&gt;"))))
</span><span class='line'>                    ": "
</span><span class='line'>                    (group-n 2 (seq "[" (minimal-match (one-or-more anything)) "]"))))
</span><span class='line'>          1 nil nil 0 1
</span><span class='line'>          (1 file-name-shadow-properties)
</span><span class='line'>          (2 file-name-shadow-properties))
</span><span class='line'>         ;; &lt;path&gt;:&lt;line&gt;:&lt;col&gt;: &lt;function-name&gt;
</span><span class='line'>         (,(rx (seq bol
</span><span class='line'>                    (or "" "   ")
</span><span class='line'>                    (group-n 1
</span><span class='line'>                             (one-or-more (not (any ":\n \t&gt;")))
</span><span class='line'>                             (zero-or-more (not (any ":\n\t&gt;"))))
</span><span class='line'>                    ":" (group-n 2 (one-or-more digit))
</span><span class='line'>                    ":" (group-n 3 (one-or-more digit))
</span><span class='line'>                    ": "
</span><span class='line'>                    (group-n 4 (one-or-more (any word "-_~!/@$%^&&lt;&gt;{}?")))
</span><span class='line'>                    eol))
</span><span class='line'>          1 2 3 0 1
</span><span class='line'>          (1 file-name-shadow-properties)
</span><span class='line'>          (4 font-lock-function-name-face))
</span><span class='line'>         ;; &lt;path&gt;:line:col: error message
</span><span class='line'>         (,(rx (seq bol
</span><span class='line'>                    (or "" "   ")
</span><span class='line'>                    (group-n 1
</span><span class='line'>                             (one-or-more (not (any ":\n \t&gt;")))
</span><span class='line'>                             (zero-or-more (not (any ":\n\t&gt;"))))
</span><span class='line'>                    ":" (group-n 2 (one-or-more digit))
</span><span class='line'>                    ":" (group-n 3 (one-or-more digit))
</span><span class='line'>                    ": "
</span><span class='line'>                    (group-n 4 (minimal-match (one-or-more anything)))
</span><span class='line'>                    eol))
</span><span class='line'>          1 2 3 2 1
</span><span class='line'>          (1 file-name-shadow-properties)
</span><span class='line'>          (4 compilation-error-face))
</span><span class='line'>         ;; &lt;function-name&gt;: &lt;error-message&gt;
</span><span class='line'>         (,(rx (seq bol
</span><span class='line'>                    (or "" "   ")
</span><span class='line'>                    (group-n 1 (one-or-more (any word "-_~!/@$%^&&lt;&gt;{}?.")))
</span><span class='line'>                    (group-n 2 "")
</span><span class='line'>                    ": "
</span><span class='line'>                    (group-n 3 (minimal-match (one-or-more anything)))
</span><span class='line'>                    eol))
</span><span class='line'>          nil nil nil 2 2
</span><span class='line'>          (1 font-lock-function-name-face)
</span><span class='line'>          (3 compilation-error-face))
</span><span class='line'>         ;; &lt;path&gt;:&lt;line&gt;:&lt;col&gt;
</span><span class='line'>         (,(rx (seq bol
</span><span class='line'>                    (or "" "   ")
</span><span class='line'>                    (group-n 1
</span><span class='line'>                             (one-or-more (not (any ":\n \t&gt;")))
</span><span class='line'>                             (zero-or-more (not (any ":\n\t&gt;"))))
</span><span class='line'>                    ":" (group-n 2 (zero-or-more digit))
</span><span class='line'>                    ":" (group-n 3 (zero-or-more digit))
</span><span class='line'>                    eol))
</span><span class='line'>          1 2 3 0 1
</span><span class='line'>          (1 file-name-shadow-properties)))))</span></code></pre></td></tr></table></div></figure>


<p>Which looks much better:</p>

<p>Error processing input, expected syntax: {% img [class name(s)] [http[s]:/]/path/to/image [width [height]] [title text | &ldquo;title text&rdquo; [&ldquo;alt text&rdquo;]] %}</p>

<p>Ah, see, the actual error message is highlighted, and the pile of linked pathnames is muted.</p>

<p>It&rsquo;s not perfect but it&rsquo;s a definite improvement.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Editing Structured Regexes Interactively in Emacs]]></title>
    <link href="http://crowding.github.io/blog/2014/09/09/editing-regexes-interactively-in-emacs/"/>
    <updated>2014-09-09T15:50:44-07:00</updated>
    <id>http://crowding.github.io/blog/2014/09/09/editing-regexes-interactively-in-emacs</id>
    <content type="html"><![CDATA[<p>I was using regex-builder to make something, but it still looked like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"^ *\\([^:(\t\n]+\\)\\(:\\([0-9]+\\)\\)?\\(:\\([0-9]+\\)\\)?\\(: \\(\\(\\w\\|\\s_\\)+\\|\\[\\(\\w\\|\\s \\)+\\]\\)\\)?\\(: \\(.*\\)\\)?"</span></code></pre></td></tr></table></div></figure>


<p>Leaning-toothpicks syndrome is kicking my ass. What if I write a regex using S-expressions? Wouldn&rsquo;t that be the bee&rsquo;s knees?</p>

<!-- more -->


<p>Well, one thing I can do use use the <code>rx</code> macro, but <code>re-builder</code> doesn&rsquo;t seem to want to work with it. I call <code>(reb-change-syntax)</code> to select &lsquo;rx&rsquo; but it only performs a search sometimes? And often finds no matches?</p>

<p>Debugging from this impetus I get to stepping through <code>reb-update-overlays</code> but I can&rsquo;t inspect the value of local variables in either <code>edebug</code> or <code>debug</code> for some weird reason. (Because of <code>-*- lexical-binding:t -*-</code> in the file.)</p>

<p>New yak frame: how to inspect vars in  lexically bound code? It&rsquo;s probably impossible, though there was an incomplete <a href="http://emacs.1067599.n5.nabble.com/Edebug-amp-lexical-scope-td202618.html">thread</a> about it a couple years ago.</p>

<p>Well, I guess I&rsquo;ll debug it by adding messages.</p>

<p>Now, I find that when I use <code>(rx (one-or-more "/"))</code>, that macro should expand to <code>"/+"</code> but but the regexp we search for is actually <code>"\\(?:/\\+\\)"</code> which doesn&rsquo;t look like a proper regex. What is <code>reb-target-binding</code> doing? Pulling the binding from the target buffer. What&rsquo;s <code>reb-cook-regexp</code> doing? Calling <code>rx-to-string</code> on the result of an <code>rx</code> macro. Which it shouldn&rsquo;t?</p>

<p>Oh, I was typing</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(rx (one-or-more ":"))</span></code></pre></td></tr></table></div></figure>


<p>in the buffer like a sucker (idk, that&rsquo;s what you would write in Elisp?). Turns out I need to type</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'(one-or-more ":")</span></code></pre></td></tr></table></div></figure>


<p>So how do I do a longer regex????? Use <code>and</code>/<code>seq</code>. It should be called <code>progn</code>, shouldn&rsquo;t it? Turns out I should write in regexp-builder like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'(seq (one-or-more ":") (class )</span></code></pre></td></tr></table></div></figure>


<p>So now I write regexps in regexp-builder like:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>'(seq bol (zero-or-more " ")
</span><span class='line'>      (group (one-or-more (not (char ":\n\t"))))
</span><span class='line'>      (zero-or-one ":" (group (one-or-more digit)))
</span><span class='line'>      (zero-or-one ":" (group (one-or-more digit)))
</span><span class='line'>      (zero-or-one ": " (group (one-or-more (or (syntax word) (syntax symbol))))))</span></code></pre></td></tr></table></div></figure>


<p>and then paste the <code>(seq ...)</code> into an <code>(rx ...)</code> macro when I&rsquo;m done.</p>

<p>Well, there&rsquo;s one more problem. Sometimes I can type a correct regexp and it won&rsquo;t update (it actually removes all highlights). Seems to have something to do with regexp-builder behaving inappropriately when an edit doesn&rsquo;t change the compiled form of the regexp. But I can then call <code>(reb-force-update)</code> and it does, that&rsquo;ll work for now.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Get Emacs Set Up for Racket]]></title>
    <link href="http://crowding.github.io/blog/2014/09/05/get-emacs-set-up-for-racket/"/>
    <updated>2014-09-05T13:24:15-07:00</updated>
    <id>http://crowding.github.io/blog/2014/09/05/get-emacs-set-up-for-racket</id>
    <content type="html"><![CDATA[<p>I want to get back to doing problems out of SICP, but I want to use a more familiar editor.</p>

<p>Racket suggests Geiser and Quack. I already have Geiser installed from sopme package archive when I aborted an earlier attempt (and Geiser is supposed to, independently, include a version of Quack, or something?)</p>

<!-- more -->


<p>When I go to edit a .rkt file, I end up in Scheme-mode, defined in <code>scheme.el</code>. Is this Geiser? No &mdash; Geiser is the bit that interacts with the REPL, and it&rsquo;s not enabled.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(add-hook 'scheme-mode-hook 'geiser-mode)</span></code></pre></td></tr></table></div></figure>


<p>Wait, the indicator for Geiser mode is that it says &ldquo;Racket/A&rdquo; in the modeline._Geiser is a minor-mode.</p>

<p>So how do I start a Racket interpreter? <code>M-x run-geiser</code>. It asks me whether I want Racket or Guile. Despite what the manual claims, I can&rsquo;t make that a <em>default</em>. I can make it  <em>the only option</em> by saying there is no Guile to worry about.:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(setq geiser-active-implementations '(racket))</span></code></pre></td></tr></table></div></figure>


<p>There appears to be no notion of &ldquo;use a default but allow you to select from options with a <code>C-u</code> prefix&rdquo; which would strike me as a more Emacsy way of doing it. ಠ_ಠ (And it also turns out you can do <code>M-x run-racket</code>.)</p>

<p>Now, the REPL appears with this error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Welcome to Racket v6.0.1.
</span><span class='line'>/Users/peter/.emacs.d/elpa/geiser-0.5/scheme/racket/geiser/user.rkt:17:9: collection not found
</span><span class='line'>  for module path: mzlib/thread
</span><span class='line'>  collection: "mzlib"
</span><span class='line'>  in collection directories:
</span><span class='line'>   /Users/peter/Library/Racket/6.0.1/collects
</span><span class='line'>   /usr/local/Cellar/plt-racket/6.0.1/share/racket/collects
</span><span class='line'>   /Users/peter/.emacs.d/elpa/geiser-0.5/scheme/racket/
</span><span class='line'>  context...:
</span><span class='line'>   show-collection-err
</span><span class='line'>   standard-module-name-resolver
</span><span class='line'>   standard-module-name-resolver</span></code></pre></td></tr></table></div></figure>


<p>The first problem this points to is that it&rsquo;s running Racket out of Homebrew, not the mroe complete one I downloaded from the Racket website.</p>

<p>It looks like one is expected to add /Applications/Racket/{bin,man}, etc to one&rsquo;s path(s). I did that in the form of a Homeshick module:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ homeshick generate plt-racket
</span><span class='line'>$ homeshick cd plt-racket
</span><span class='line'>$ mkdir home/.bashrc_includes
</span><span class='line'>$ echo 'export PATH=/Applications/Racket\ v6.1/bin:$PATH' &gt; home/.bashrc_includes/racket.sh
</span><span class='line'>$ homeshick link plt-racket</span></code></pre></td></tr></table></div></figure>


<p>Alternately, I think I could have done<code>$ raco pkg install compatibility-lib</code> to fix the error in Homebrew&rsquo;s Racket.</p>

<p>Finally, I&rsquo;ll install racket-mode from ELPA.</p>

<h3>How do I use this thing?</h3>

<p>NowI need to learn the things that I already knew for other Emacs-based REPLS.</p>

<ul>
<li>How do I load a whole file into the Racket interpreter? <code>C-c C-b</code>?

<ul>
<li>(Gohd, how do I make keybindings for all the different flavors of Comint more consistent?)</li>
</ul>
</li>
<li>How do I interactively send forms to the Racket interpreter? <code>C-x C-e</code>, same as Emacs lisp.</li>
<li>How do I switch between more than one instance of Racket interpreter? Uhhhhhh&hellip;..</li>
<li>&ldquo;Switching between modules&rdquo; seems important somehow. You do it with <code>C-c C-m</code> and <code>C-c C-a</code> in editing buffers.</li>
<li><code>C-c C-z</code> for &ldquo;jump to REPL&rdquo;, <code>C-c C-a</code> for jump to REPL and switch module.</li>
</ul>


<h3>What about <code>#lang</code> directive?</h3>

<p>Pressing <code>C-c C-b</code> in one of my SICP problem sets got me:</p>

<pre><code>Error: retort-syntax

UNKNOWN::862: read: #lang not enabled in the current context
  context...:
   /Applications/Racket v6.1/collects/racket/private/misc.rkt:87:7
racket@&gt;

Expression evaluated was:

#lang planet neil/sicp
</code></pre>

<p>This means actually I should use <code>C-c C-a</code>. I knew modules sounded important! Note that this does&rsquo;t auto-save before loading, so I often give a <code>C-x C-s C-c C-a</code> sequence. I cut that out by making it autosave:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(define geiser-buffer-p ()
</span><span class='line'>  "true if current buffer is a Geiser buffer"
</span><span class='line'>  geiser-mode)
</span><span class='line'>;
</span><span class='line'>(defun geiser-repl-save-some-buffers-and-enter-module ()
</span><span class='line'>  (interactive)
</span><span class='line'>  (save-some-buffers t 'geiser-buffer-p)
</span><span class='line'>  (geiser-mode-switch-to-repl-and-enter))
</span><span class='line'>;
</span><span class='line'>(define-key geiser-mode-map (kbd "C-c C-a")
</span><span class='line'>  'geiser-repl-save-some-buffers-and-enter-module)</span></code></pre></td></tr></table></div></figure>


<h3>Now how do I get autocompletion?</h3>

<p>Something happens when I press Tab, so far so good.</p>

<h3>And what about documentation!</h3>

<p>Autodoc is enabled and it&rsquo;s like eldoc.
<code>C-c C-d d</code> for jump to documentation for symbol at point
<code>C-c C-d i</code> finds it in the Racket manual in your web browser.
<code>C-c C-d m</code> lists the bindings in a module.</p>

<p>Cool, this is looking like it will work.</p>

<h3>And what about linting / flychecking?</h3>

<p>I turn on flycheck mode? Haven&rsquo;t seen it do anything yet. Ah, there it goes. I want to make it more obtrusive (its error highlights are single characters often.)</p>

<p>Also, as I edit code I&rsquo;m getting this annoyingly big message in the minibuffer:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Checker racket returned non-zero exit code 1, but no errors from output: r5rs:body: no expression in body
</span><span class='line'>  in: (r5rs:body (define (new-record data) attach-tag data) (define (get-record name) (new-record data)) (define (get-salary record) (quote salary)))
</span><span class='line'>  context...:
</span><span class='line'>   /Applications/Racket v6.1/share/pkgs/r5rs-lib/r5rs/main.rkt:335:2
</span><span class='line'>
</span><span class='line'>Checker definition probably flawed.</span></code></pre></td></tr></table></div></figure>


<p>In other words, one kind of syntax error (no expression on body) is not getting interpreted as an &ldquo;error&rdquo;.</p>

<p>Actually this particular syntax error (at least when writing code in the <code>#lang planet neil/sicp</code> module) is annoying because it won&rsquo;t point you to the line on which error occurs despite it being mostly syntax. Usually turns out to be an &lsquo;if&rsquo; with no clauses, a duplicated paren, or something.</p>

<p>Additionally, the red underline that flycheck puts is misplaced and tiny (it is frequently on an open paren, when it should really be on all of the first sexp inside that paren).</p>

<h3>How about autocomplete in the REPL for symbols defined in my module? How about eldoc for my own definitions?</h3>

<p>This should be possible, right? I&rsquo;m getting &ldquo;end of file during parsing&rdquo; errors. I don&rsquo;t get it. But DrRacket was not autocompleting symbols defined in buffer either.</p>

<p>Autocomplete in REPL does seem to work once I can successfully load the module.</p>

<p>However, there appear to be situations in which the link between Geiser and Racket freezes up.</p>

<h3>What does &ldquo;compile&rdquo; do?</h3>

<p>As far as I can tell, <code>C-c C-k</code> on one of my SICP problemsets pops up a &ldquo;compile&rdquo; buffer with the following contents:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Compiling /Users/peter/sicp/chap2.4.rkt ...
</span><span class='line'>
</span><span class='line'>Error: retort-syntax
</span><span class='line'>
</span><span class='line'>(mcons (mcons 'result (mcons "#&lt;void&gt;" '())) (mcons (mcons 'output "") '()))
</span><span class='line'>racket@chap2.4.rkt&gt;</span></code></pre></td></tr></table></div></figure>


<p>&ldquo;Retort-syntax&rdquo;? WTH?</p>

<h3>Navigating errors.</h3>

<p><code>&lt;backtab&gt;</code>  and <tab> navigates errors in the buffer. <code>&lt;tab&gt;</code> also indents or autocompletes symbols. But <code>&lt;tab&gt;</code> from an empty prompt doesn&rsquo;t DWIM &ldquo;go to previous error, then preceding prompt, then next error&rdquo; from an empty prompt, which it should (then I could just tab to the most likely link I want to take, then <code>&lt;return&gt;</code> to follow it, two keystrokes.)</p>

<p>The error links were not always working, and were ugly, so I <a href="2014-09-09-fixing-geiser-racket-repls-error-links.html">spent some time fixing them.</a></p>

<p>This led to error links not actually navigating to the error when I pressed <code>&lt;return&gt;</code>, so I added this to restore that behavior:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(defun geiser-repl--follow-error-or-maybe-send ()
</span><span class='line'>  (interactive)
</span><span class='line'>  (if (get-text-property (point) 'compilation-message)
</span><span class='line'>      (compile-goto-error)
</span><span class='line'>      (geiser-repl--maybe-send)))
</span><span class='line'>(define-key geiser-repl-mode-map (kbd "&lt;return&gt;")
</span><span class='line'>  'geiser-repl--follow-error-or-maybe-send)</span></code></pre></td></tr></table></div></figure>


<h3>Set the output syntax</h3>

<p>The &ldquo;write&rdquo; output syntax puts &ldquo;mcons&rdquo; everywhere. In DrRacket, one can choose the &ldquo;write&rdquo; output style to elide the difference between mutable and immutable output cells. How does that work from the REPL? (Answered in <a href="http://stackoverflow.com/questions/25775600/change-output-printing-style-from-racket-repl/25777882?noredirect=1#comment40353857_25777882">Stack Overflow question</a>. How to do this automatically, haven&rsquo;t worked out yet.)</p>

<h3>Improve error display</h3>

<p>To what extent can Racket error output be customized? Sometimes it elides path names with &ldquo;<code>...</code>&rdquo; which is annoying. Other times it elides path names for good.</p>

<h3>Weird issues</h3>

<p>Occasionally in the Geiser REPL I will be unable to use <code>C-a</code> to go to back to the prompt, if point is at the end of buffer. What gives?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Replace Less With Emacs]]></title>
    <link href="http://crowding.github.io/blog/2014/08/16/replace-less-with-emacs/"/>
    <updated>2014-08-16T12:31:20-07:00</updated>
    <id>http://crowding.github.io/blog/2014/08/16/replace-less-with-emacs</id>
    <content type="html"><![CDATA[<p>I use shell-mode in Emacs a lot (and have never been that taken with Eshell or term-mode). I got tired of seeing this sort of thing:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dekkera:htlatex-maximal peter$ git log
</span><span class='line'>WARNING: terminal is not fully functional
</span><span class='line'>-  (press RETURN)</span></code></pre></td></tr></table></div></figure>




<!-- more -->


<p>It&rsquo;s reasonable for commands that generate a lot of output to go through <code>less</code>, but <code>less</code> works poorly in an Emacs buffer.</p>

<p>However, Emacs itself is quite good at paging. So I wondered if I could make Emacs take over for <code>less</code>. I wrote this shell script <code>emacs-pager</code> and placed it on my <code>$PATH</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#!/bin/bash
</span><span class='line'>#A script for $PAGER that redirects to an Emacs buffer
</span><span class='line'>
</span><span class='line'># get the command line whose output I am paging
</span><span class='line'>COMMAND=$(echo "$(ps -o 'command=' -p $(ps -o 'ppid=' $$))" | sed -e 's/["\\]/\\&/g' -e 's/["\\]/\\&/g')
</span><span class='line'>
</span><span class='line'># make a named fifo
</span><span class='line'>FIFO=$(mktemp -ut pager.$$)
</span><span class='line'>mkfifo $FIFO
</span><span class='line'>
</span><span class='line'># tell emacs to to read that fifo into a buffer
</span><span class='line'>read -d '' LISP &lt;&lt;EOF
</span><span class='line'>(let* ((buf (generate-new-buffer "*${COMMAND}*"))
</span><span class='line'>       (proc (start-process "PAGER" buf "cat" "$FIFO")))
</span><span class='line'>   (view-buffer buf 'kill-buffer)
</span><span class='line'>   ; make sure point stays at top of window while process output accumulates
</span><span class='line'>   (set-process-filter proc
</span><span class='line'>     (lambda (proc string)
</span><span class='line'>       (let ((buf (process-buffer proc))
</span><span class='line'>             (mark (process-mark proc)))
</span><span class='line'>       (with-current-buffer buf
</span><span class='line'>         (let ((buffer-read-only nil))
</span><span class='line'>           (save-excursion
</span><span class='line'>             (goto-char mark)
</span><span class='line'>             (insert string)
</span><span class='line'>             (ansi-color-apply-on-region mark (point))
</span><span class='line'>             ; TODO also support backspace overstriking
</span><span class='line'>             (set-marker mark (point)))))))))
</span><span class='line'>EOF
</span><span class='line'>
</span><span class='line'># echo "$LISP"
</span><span class='line'>
</span><span class='line'>emacsclient -e "$LISP"
</span><span class='line'>
</span><span class='line'>cat &gt; "$FIFO"</span></code></pre></td></tr></table></div></figure>


<p>Then I made sure the following was in my <code>init.el</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(server-start)
</span><span class='line'>(unless (getenv "TERM_PROGRAM")
</span><span class='line'>  (setenv "TERM" "xterm"))
</span><span class='line'>(setenv "PAGER" "emacs-pager")</span></code></pre></td></tr></table></div></figure>


<p>Now when I invoke <code>git log</code> or <code>man</code>, the output appears in a new paging buffer.</p>

<ul>
<li>Note use of &ldquo;ps&rdquo; to figure out what to call the buffer.</li>
<li>Note use of <code>printf '%q'</code> to double escape the string that is substituted into Lisp code. (Why did I need double escaping? Shell scripting is terrible is why.)</li>
<li>The <code>'kill-buffer</code> means that the paging buffer will be deleted when you press &ldquo;q&rdquo;. This is not standard Emacs behavior but I don&rsquo;t want a whole gaggle of temporary buffers laying around.</li>
<li>The process filter is there just to keep point at the top of the buffer as you receive input.</li>
<li>There was a weird interaction with Emacs&#8217; builtin <code>M-x man</code> command. I worked around it with:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(defadvice man (around reset-pager activate)
</span><span class='line'>  "reset PAGER to `less' when getting man pages."
</span><span class='line'>  (let ((old (getenv "PAGER")))
</span><span class='line'>    (setenv "PAGER" "less")
</span><span class='line'>    ad-do-it
</span><span class='line'>    (setenv "PAGER" old)))</span></code></pre></td></tr></table></div></figure>


<ul>
<li>There is a further problem when running <code>man</code> from the shell, in that <code>man</code> outputs backspace codes for bold/underline and so on. (TODO)</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hevea]]></title>
    <link href="http://crowding.github.io/blog/2014/07/25/hevea/"/>
    <updated>2014-07-25T14:55:01-07:00</updated>
    <id>http://crowding.github.io/blog/2014/07/25/hevea</id>
    <content type="html"><![CDATA[<p>So I wrote a thesis, using some self-torturing chain of LyX, <a href="http://yihui.name/knitr/">knitr</a>, and a build tool of my own devising. It made a PDF, now I want to make it a webpage.</p>

<p>I tried a few tools, and settled on <a href="http://hevea.inria.fr/">HeVeA</a> as the tool that showed the most promise (as in, &lsquo;it actually generated some HTML for a subset of my files, within a few hours of work&rsquo;). That&rsquo;s not close to &ldquo;working&rdquo; though.</p>

<!-- more -->


<p>Currently, I&rsquo;m having a problem where a <code>\ref{}</code> is processed correctly by LaTeX, producing a link labeled &ldquo;Figure x&rdquo;, but incorrectly by Hevea, including the entire caption, like so:</p>

<p>Error processing input, expected syntax: {% img [class name(s)] [http[s]:/]/path/to/image [width [height]] [title text | &ldquo;title text&rdquo; [&ldquo;alt text&rdquo;]] %}</p>

<p>Disabling the <code>hyperref</code> and <code>refstyle</code> packages didn&rsquo;t do much. I seem to remember also having this problem when using a <code>ref{}</code> to another figure inside of a figure caption but I am not sure how that was resolved.</p>

<p>This is one problem with LaTeX projects, they become hard to troubleshoot. For any two things you want to do in LaTeX, there are four packages offering each, for 16 combinations, each of which will be grossly or subtly incompatible in some way.</p>

<p>In this case, something somewhere is fucking with the generation of reference labels or something. The actual HTML looks like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#mov%3Auncrowded&quot;</span><span class="nt">&gt;</span>2.1(demo_circle_6.mov) An example
</span><span class='line'>motion stimulus similar to those used in my experiments. There are six
</span><span class='line'>elements, with the carrier motion clockwise and the envelope
</span><span class='line'>counterclockwise. The envelope motion dominates the subjective
</span><span class='line'>appearance. figure.caption.2<span class="nt">&lt;/a&gt;</span> shows six elements, so the spacing
</span><span class='line'>between elements
</span></code></pre></td></tr></table></div></figure>


<p>which was constructed from this TeX:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>\ref{mov:uncrowded} shows six elements, so the spacing between elements
</span></code></pre></td></tr></table></div></figure>


<p>Now, part of the fuckup is with hyperref? maybe? Next I need to try constructing a minimal example. Luckily I have a minimal example already&hellip;.</p>

<h3>Some time later</h3>

<p>OK so, turns out the inclusion of figure captions in labels was caused by an ill-thought-out line I had written in <code>trouble.hva</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>\renewcommand{\AtBeginDocument}[1]{}
</span></code></pre></td></tr></table></div></figure>


<p>I had written this to &ldquo;prevent&rdquo; an error that was occurring when <code>hevea</code> was  reading the <code>.aux</code> file, but it also screwed up hyperref. It seems I can&rsquo;t get hyperref to work with hevea, and cleveref.</p>

<h3>Giving up</h3>

<p>After constructing a minimal example, I still couldn&rsquo;t identify a way to make autoref/cleverref references work.</p>

<h2>Tex4ht</h2>

<p>Someone suggested that <code>tex4ht</code> might work better than <code>hevea</code>, and at least it correctly processed my minimal example. That doen&rsquo;t mean it&rsquo;ll process the the whole thesis, though.</p>

<p>The first problem is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>--- warning --- Can&#39;t find/open file `introduction_chapter.dvi&#39;
</span><span class='line'>--- error --- Can&#39;t find/open file `introduction_chapter.dvi&#39;
</span></code></pre></td></tr></table></div></figure>


<p>Which was because I was using <code>tex4ht</code> and not <code>htlatex</code>. Using <code>htlatex</code> I instead get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>! I can&#39;t find file `introduction_chapter.html&#39;.
</span><span class='line'><span class="nt">&lt;to</span> <span class="na">be</span> <span class="na">read</span> <span class="na">again</span><span class="nt">&gt;</span>
</span><span class='line'>                   \relax
</span><span class='line'>l.79 \begin{document}
</span></code></pre></td></tr></table></div></figure>


<p>Which is odd since that command is actually supposed to be making the file!</p>

<p>So it must be failing at an earlier stage?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Whitespace-mode]]></title>
    <link href="http://crowding.github.io/blog/2014/05/19/whitespace-mode/"/>
    <updated>2014-05-19T21:00:35-07:00</updated>
    <id>http://crowding.github.io/blog/2014/05/19/whitespace-mode</id>
    <content type="html"><![CDATA[<p>Why does whitespace-mode fuck up longlines mode when it&rsquo;s supposed to be disabled?</p>

<p>I&rsquo;d like to edit markdown files with longlines-mode (word wrapping). Clearly when longlines-mode is enabled, I don&rsquo;t want to highlight 80+ char lines, as I do when editing code. However, I still want the other whitespace-mode features (highlight trailing spaces, tabs, etc)</p>

<!-- more -->


<p>I have, in my markdown-mode modehook:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  (when whitespace-mode
</span><span class='line'>    (whitespace-mode 'disable)
</span><span class='line'>    (setq-local whitespace-style (remove 'lines-tail whitespace-style)))</span></code></pre></td></tr></table></div></figure>


<p>It doesn&rsquo;t work. Lines longer than 80char still get highlighted.</p>

<p>But indeed &lsquo;lines-tail does not appear in whitespace-style. However, too late: this came after whitespace-mode had initialized, and so it&rsquo;s already set up.</p>

<p>Moving to a lighlighted char and doing <code>(face-at-point)</code> reveals <code>whitespace-line</code>.</p>

<p>Disabling font-lock-mode disables all highlighting.</p>

<p><code>font-lock-fontify-buffer</code> doesn&rsquo;t do it.</p>

<p><code>font-lock-keywords-alist</code> does not contain anything pertaining to whitespace-mode.</p>

<p>Hmmm. maybe I can locally redefine the face.</p>

<p><code>font-lock-keywords</code> is not buffer local. It contains this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>("^\\([^ \n]\\{4\\}\\|[^ \n]\\{0,3\\}    \\)\\{20\\}\\(.+\\)$"
</span><span class='line'>(2 whitespace-line t))</span></code></pre></td></tr></table></div></figure>


<p>If I remove <code>lines-tail</code> f rom <code>whitespace-style</code> before loading the buffer&hellip; the offending highlighting does not take place.</p>

<p>So I need to to the remove before enabling whitespace mode? and make it buffer-local?</p>

<p>So, I made sure that the modification to whitespace-style occurred before whitespace-mode was enabled. That did the trick, I think.</p>

<p>So, here:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(add-hook 'markdown-mode-hook 'pbm-markdown-fonts)
</span><span class='line'>
</span><span class='line'>(defun pbm-markdown-fonts ()
</span><span class='line'>  ;Use variable pitch fonts, and wrap long lines.
</span><span class='line'>  (variable-pitch-mode t)
</span><span class='line'>  (if whitespace-mode
</span><span class='line'>      (error "markdown mode needs configured before whitespace mode is enabled"))
</span><span class='line'>  (setq-local whitespace-style (remove 'lines-tail whitespace-style))
</span><span class='line'>  (visual-line-mode)
</span><span class='line'>  (set-visual-wrap-column 75)
</span><span class='line'>  (font-lock-fontify-buffer))</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Whitespace Mode]]></title>
    <link href="http://crowding.github.io/blog/2014/05/19/whitespace-mode/"/>
    <updated>2014-05-19T00:00:00-07:00</updated>
    <id>http://crowding.github.io/blog/2014/05/19/whitespace-mode</id>
    <content type="html"><![CDATA[<table>
<tbody>
<tr class="odd">
<td align="left">layout: post</td>
</tr>
<tr class="even">
<td align="left">title: &quot;whitespace-mode&quot;</td>
</tr>
<tr class="odd">
<td align="left">date: 2014-05-19 21:00:35 -0700</td>
</tr>
<tr class="even">
<td align="left">comments: true</td>
</tr>
<tr class="odd">
<td align="left">categories: technote emacs</td>
</tr>
</tbody>
</table>
<p>Why does whitespace-mode fuck up longlines mode when it&#8217;s supposed to be disabled?</p>
<p>I&#8217;d like to edit markdown files with longlines-mode (word wrapping). Clearly when longlines-mode is enabled, I don&#8217;t want to highlight 80+ char lines, as I do when editing code. However, I still want the other whitespace-mode features (highlight trailing spaces, tabs, etc)</p>
<!-- more -->

<p>I have, in my markdown-mode modehook:</p>
<pre><code>  (when whitespace-mode
    (whitespace-mode &#39;disable)
    (setq-local whitespace-style (remove &#39;lines-tail whitespace-style)))</code></pre>
<p>It doesn&#8217;t work. Lines longer than 80char still get highlighted.</p>
<p>But indeed &#8216;lines-tail does not appear in whitespace-style. However, too late: this came after whitespace-mode had initialized, and so it&#8217;s already set up.</p>
<p>Moving to a lighlighted char and doing <code>(face-at-point)</code> reveals <code>whitespace-line</code>.</p>
<p>Disabling font-lock-mode disables all highlighting.</p>
<p><code>font-lock-fontify-buffer</code> doesn&#8217;t do it.</p>
<p><code>font-lock-keywords-alist</code> does not contain anything pertaining to whitespace-mode.</p>
<p>Hmmm. maybe I can locally redefine the face.</p>
<p><code>font-lock-keywords</code> is not buffer local. It contains this:</p>
<pre><code>(&quot;^\\([^    \n]\\{4\\}\\|[^ \n]\\{0,3\\}    \\)\\{20\\}\\(.+\\)$&quot;
(2 whitespace-line t))</code></pre>
<p>If I remove <code>lines-tail</code> f rom <code>whitespace-style</code> before loading the buffer&#8230; the offending highlighting does not take place.</p>
<p>So I need to to the remove before enabling whitespace mode? and make it buffer-local?</p>
<p>So, I made sure that the modification to whitespace-style occurred before whitespace-mode was enabled. That did the trick, I think.</p>
<p>So, here:</p>
<pre><code>(add-hook &#39;markdown-mode-hook &#39;pbm-markdown-fonts)

(defun pbm-markdown-fonts ()
  ;Use variable pitch fonts, and wrap long lines.
  (variable-pitch-mode t)
  (if whitespace-mode
      (error &quot;markdown mode needs configured before whitespace mode is enabled&quot;))
  (setq-local whitespace-style (remove &#39;lines-tail whitespace-style))
  (visual-line-mode)
  (set-visual-wrap-column 75)
  (font-lock-fontify-buffer))</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Time Shifting an Internet Stream With VLC]]></title>
    <link href="http://crowding.github.io/blog/2014/05/15/time-shifting-an-internet-stream/"/>
    <updated>2014-05-15T17:31:07-07:00</updated>
    <id>http://crowding.github.io/blog/2014/05/15/time-shifting-an-internet-stream</id>
    <content type="html"><![CDATA[<p><em>(content note: this didn&rsquo;t work.)</em></p>

<p>I want to listen to this <a href="http://www.brap.fm/2014/05/14/the-shiso-room-yppah-guest-mix-16-05-14/">upcoming show</a> but don&rsquo;t know if it&rsquo;ll be downloadable later.</p>

<p>I worked out a VLC command line:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/Applications/VLC.app/Contents/MacOS/VLC \
</span><span class='line'>http://delicious.wavestreamer.com:4626/listen.pls?sid=1 \
</span><span class='line'>    vlc://quit \
</span><span class='line'>    --network-caching=10000 \
</span><span class='line'>    --sout /Users/peter/2014-05-16_yppah_shisho_room_mix.ogg \
</span><span class='line'>    --run-time=7400 \
</span><span class='line'>    --intf rc</span></code></pre></td></tr></table></div></figure>


<p>I put the command in an executable <code>.sh</code> file and scheduled it to run using LaunchControl.</p>

<h3>huh?</h3>

<p>Note that I mistakenly tried to actually read the documentation and used</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>--sout "#standard{access=file,mux=ogg,dst=/Users/peter/2014-05-16_yppah_shisho_room_mix.ogg}"</span></code></pre></td></tr></table></div></figure>


<p>I don&rsquo;t know what&rsquo;s wrong or missing about this, but VLC decided to treat it as a filename instead of the syntax in the <a href="http://www.videolan.org/doc/streaming-howto/en/ch03.html">docs</a>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[0x109c21840] filesystem access error: cannot open file /Users/peter/#standard{access=file,mux=ogg,dst=/Users/peter/2014-05-16_yppah_shisho_room_mix.ogg} (No such file or directory)</span></code></pre></td></tr></table></div></figure>


<p>Anyway, I forget what I did after that, but the VLC command never actually launched. There was an MP3 of the show available anyway.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Time Shifting an Internet Stream]]></title>
    <link href="http://crowding.github.io/blog/2014/05/15/time-shifting-an-internet-stream/"/>
    <updated>2014-05-15T00:00:00-07:00</updated>
    <id>http://crowding.github.io/blog/2014/05/15/time-shifting-an-internet-stream</id>
    <content type="html"><![CDATA[<table>
<tbody>
<tr class="odd">
<td align="left">layout: post</td>
</tr>
<tr class="even">
<td align="left">title: &quot;Time shifting an internet stream with VLC&quot;</td>
</tr>
<tr class="odd">
<td align="left">date: 2014-05-15 17:31:07 -0700</td>
</tr>
<tr class="even">
<td align="left">comments: true</td>
</tr>
<tr class="odd">
<td align="left">categories: technote fail</td>
</tr>
</tbody>
</table>
<p><em>(content note: this didn&#8217;t work.)</em></p>
<p>I want to listen to this <a href="http://www.brap.fm/2014/05/14/the-shiso-room-yppah-guest-mix-16-05-14/">upcoming show</a> but don&#8217;t know if it&#8217;ll be downloadable later.</p>
<p>I worked out a VLC command line:</p>
<pre><code>/Applications/VLC.app/Contents/MacOS/VLC \
http://delicious.wavestreamer.com:4626/listen.pls?sid=1 \
    vlc://quit \
    --network-caching=10000 \
    --sout /Users/peter/2014-05-16_yppah_shisho_room_mix.ogg \
    --run-time=7400 \
    --intf rc</code></pre>
<p>I put the command in an executable <code>.sh</code> file and scheduled it to run using LaunchControl.</p>
<h3 id="huh">huh?</h3>
<p>Note that I mistakenly tried to actually read the documentation and used <code>--sout &quot;#standard{access=file,mux=ogg,dst=/Users/peter/2014-05-16_yppah_shisho_room_mix.ogg}&quot;</code></p>
<p>I don&#8217;t know what&#8217;s wrong or missing about this, but VLC decided to treat it as a filename instead of the syntax in the <a href="http://www.videolan.org/doc/streaming-howto/en/ch03.html">docs</a>:</p>
<pre><code>[0x109c21840] filesystem access error: cannot open file /Users/peter/#standard{access=file,mux=ogg,dst=/Users/peter/2014-05-16_yppah_shisho_room_mix.ogg} (No such file or directory)</code></pre>
<p>Anyway, I forget what I did after that, but the VLC command never actually launched. There was an MP3 of the show available anyway.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting Up Online Help in Homebrew Erlang/Emacs/Distel]]></title>
    <link href="http://crowding.github.io/blog/2014/05/05/setting-up-online-help-in-erlang-slash-emacs-slash-distel/"/>
    <updated>2014-05-05T18:14:41-07:00</updated>
    <id>http://crowding.github.io/blog/2014/05/05/setting-up-online-help-in-erlang-slash-emacs-slash-distel</id>
    <content type="html"><![CDATA[<p>Now IN THEORY, Distel-mode is supposed to show me the online help when I point by cursor at a function name and press <code>C-c C-d h</code>. What I actually get is:</p>

<p>I am unable to Google up a description of how to let Distel know where the HTML documentaiton is (as I installed Erlang from Homebrew, I find the HTML docs under <code>/usr/local/Cellar/erlang/17.0/share/doc/erlang/doc/</code>.)</p>

<p>Now looking in what <code>distel.el</code> actually does with a <code>C-c C-d h</code> I find that Distel contains a module <code>otp_doc</code> which is a singleton <code>gen_server</code>&hellip; so I go to an erlang shell on that node and type</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(emacs@dekkera)3&gt; whereis(otp_doc).
</span><span class='line'>&lt;0.44.0&gt;</span></code></pre></td></tr></table></div></figure>


<p>Now I also saw that the <code>otp_doc</code> module had a property list as the init of its <code>gen_server</code> state. The state contained a <code>root_dir</code> variable. The root_dir variable is initialized to a default of <code>code:root_dir()</code>, which is currently set to:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(emacs@dekkera)4&gt; code:root_dir().
</span><span class='line'>"/usr/local/Cellar/erlang/17.0/lib/erlang"</span></code></pre></td></tr></table></div></figure>


<p>Aping Distel and calling otp_doc does:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(emacs@dekkera)9&gt; otp_doc:distel(link, "orddict", "find", 2).
</span><span class='line'>no_html</span></code></pre></td></tr></table></div></figure>


<p>Meanwhile, another Distel function <code>C-c C-d A</code> which is bound to <code>erl-show-arglist</code>  works fine when pressed ad <code>orddict:find|</code>. And <code>C-c C-d d</code> also comes up with useful information &mdash; but this information doesn&rsquo;t look like /documentation/.</p>

<p>From Emacs. <code>C-c C-d h</code> does <code>(erl-do-find-doc 'link 'point 'code</code>root_dir 0)`,</p>

<p>And it looks like <code>init()</code> calls <code>index_html()</code> the <code>no_html</code> is coming from <code>init()</code> I guess. Here&rsquo;s how:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>html_index(file,Dir) -&gt;
</span><span class='line'>  FN = filename:join([Dir,"doc","man_index.html"]),
</span><span class='line'>  fold_file(curry(fun lines/3,Dir),[],FN).</span></code></pre></td></tr></table></div></figure>


<p>So do I need to set root_dir to <code>/usr/local/Cellar/erlang/17.0/share/erlang</code>? Or alter how otp_doc is being initialized? Looks like it is accessed through <code>otp_doc:start</code>.</p>

<p>So how to provide the start state from Emacs?</p>

<p>I can&rsquo;t find where this value is configured, anywhere.</p>

<p>So I just crapped out and made a symlink:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dekkera:lib peter$ cd /usr/local/Cellar/erlang/17.0/lib/erlang
</span><span class='line'>dekkera:lib peter$ ln -s ../../share/doc/erlang/doc doc</span></code></pre></td></tr></table></div></figure>


<p>This got rid of no_html error but I still don&rsquo;t find any HTML documentation! What the hell.  I&rsquo;ll have to see why it&rsquo;s not reading the HTML file and populating the ETS database, or something.</p>

<p>This is more debugging of Erlang than I can handle when all I&rsquo;m trying to do is write Erlang code. Argh.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Un-pause Programs in OS X]]></title>
    <link href="http://crowding.github.io/blog/2014/04/28/un-pause-programs-in-os-x/"/>
    <updated>2014-04-28T12:43:01-07:00</updated>
    <id>http://crowding.github.io/blog/2014/04/28/un-pause-programs-in-os-x</id>
    <content type="html"><![CDATA[<p>I&rsquo;m not sure why there isn&rsquo;t a builtin way to do this. When a process eats all memory on OS X, it starts &ldquo;pausing&rdquo; applications. Upon killing the offending app, one wants to un-pause all the apps. But if you close the dialog, you can&rsquo;t resume!</p>

<p>I can &ldquo;resume&rdquo; like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pgrep Chrome | xargs kill -CONT</span></code></pre></td></tr></table></div></figure>


<p>which appears to make the apps usable again but the processes still show up as &ldquo;paused&rdquo; in the force quit dialog. Also, I think the unpausing should respect the process tree (not process names.)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Actually Create a Bootable Linux USB Key for Mac]]></title>
    <link href="http://crowding.github.io/blog/2014/04/26/actually-create-a-bootable-linux-usb-key-for-mac/"/>
    <updated>2014-04-26T12:32:28-07:00</updated>
    <id>http://crowding.github.io/blog/2014/04/26/actually-create-a-bootable-linux-usb-key-for-mac</id>
    <content type="html"><![CDATA[<p>I wanted to install Linux on a partition on an older (2008) Macbook Pro. It has no working CD drive. In fact having no CD drive is an accelerating trend these days.</p>

<p>Now the Ubuntu site has <a href="http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-mac-osx">instructions</a> for making a bootable USB stick. These instructions don&rsquo;t work on my machine. Nonetheless [contrary to some reports], it is completely possible to boot this machine off a USB stick. For example, just imaging the OS X installer DVD to a USB key using Disk Utility results in a bootable key. So something is not right with the Ubuntu image or instructions.</p>

<p><a href="http://sevenbits.github.io/Mac-Linux-USB-Loader/">this did not work</a>
<a href="http://penguintosh.com/about/">this did not even run</a>
<a href="http://tillmail.de/wordpress/436">this did not work at first either</a> (even the special boot loader)
installing <a href="">rEFIt</a> gave no boot menu.</p>

<p>So here are directions that actually work. Or at least record my progress</p>

<p>Install rEFIt, but then I ran the <code>enable_always.sh</code> command, and I finally saw a boot menu on startup, and it detected the EFI file on the USB stick.</p>

<p>However, the <code>bootX64.efi</code> file showed a &ldquo;not compatible&rdquo; error when I tried to boot it. Using the 32-bit bootIA32.efi worked, and got me into a GRUB prompt.</p>

<p>From the GRUB prempt, I typed,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ls
</span><span class='line'>ls (hd0,msdos1)
</span><span class='line'>ls (hd0,msdos1)/efi/boot
</span><span class='line'>ls (hd0,msdos1)/efi/boot/&lt;name of my .iso&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Er, no, it looks like I can&rsquo;t actually make GRUB boot an .iso image off a USB disk from the command line. It (and the other &ldquo;Linux USB Creator&rdquo; apps installed boot.efi files that gave &ldquo;unsupported&rdquo; errors. So the thing to do is to extract the contents of the .iso and see if GRUB works with that.</p>

<p>So:</p>

<h2>New attempt</h2>

<p>I tried to mount the ISO to copy off the filesystem, but ISO was of course an ext filesystem unsupported on OS X I tried briefly to mount the thing using FUSE but I don&rsquo;t know how to do an ISO that way. So I loaded up an Ubuntu VM under VirtualBox, and Ubuntu&rsquo;s Startup Disk Creator utility extracted the ISO to a FAT filesystem key for me (had to try a couple of different keys to find one that that didn&rsquo;t freeze the VM_on startup though)</p>

<p>Booting Mounting this in the mac again, I found rEFIT was able to see the USB key. Also, the builtin startup menu saw the ket without need for rEFIt. But now I&rsquo;ve got an &ldquo;unsupported operation&rdquo; again when I actually try to boot the files. Closer though. So next I&rsquo;ll copy over the GRUB that (sort of worked)[<a href="http://tillmail.de/wordpress/436">http://tillmail.de/wordpress/436</a>] and</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>root (hd0,msdos1)
</span><span class='line'>configfile /boot/grub/grub.config</span></code></pre></td></tr></table></div></figure>


<p>got me into a GRUB menu. Any of the options past the menu led to a blank screen though. Crud.</p>

<p>(eta: this may be due to the grub.config having references to <code>/cdrom</code> instead of the usb)</p>

<p>I tried again with a Mint installer. Mint wouldn&rsquo;t even boot in VirtualBox so I made the Mint usbkey using Ubuntu&rsquo;s startup disk creator again.</p>

<p>FINALLY, starting Mint in &ldquo;compatibility mode&rdquo; did something and I see Linux kernel messages. Seems to freeze after a while though, in the middle of something&hellip; and now I see that &ldquo;blank screen&rdquo; on startup really means &ldquo;kernel hasn&rsquo;t figured out the video&rdquo;</p>

<p>What could I try next? Maybe install the live image as a partition? I think I&rsquo;m getting through the USB hurdle though?</p>

<p>Next I tried &ldquo;unetbootin.&rdquo; Mac version was unresponsive so tried on Ubuntu virtualbox.</p>

<p>Should also try starting with a 10.10 .iso. because apparently compatibility decreases over time.</p>

<p>Okay, so booting using rEFIt as a &ldquo;legacy OS&rdquo; off of USB using the 10.10 ISO did not work. Nor did copying the contents of the USB stick to a new partition.</p>

<p>Next I will try making a Mint ISO again with a different kernel?</p>

<p>Or Debian &ldquo;Lenny&rdquo; since <a href="http://fieldeffect.info/w/MacBookProUSB">this person</a> seems to have had success&hellip;.</p>

<h3>Failure threshold approaching</h3>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Compiling a Raspberry Pi Kernel via Ubuntu]]></title>
    <link href="http://crowding.github.io/blog/2014/04/16/compiling-a-raspberry-pi-kernel-via-ubuntu/"/>
    <updated>2014-04-16T12:42:41-07:00</updated>
    <id>http://crowding.github.io/blog/2014/04/16/compiling-a-raspberry-pi-kernel-via-ubuntu</id>
    <content type="html"><![CDATA[<p><a href="2014-04-15-compiling-a-raspberry-pi-kernel-on-osx">Previously</a>, I set up a crosstools-NG build environment on OSX and then tried to compile a kernel. The kernel compilation process was a bit much to adjust to. Easier to just install Ubuntu in a VirtualBox image and do compilation there.</p>

<p>After installing Ubuntu on the image, I did (mostly via <a href="http://raspberrypi.stackexchange.com/questions/192/how-do-i-cross-compile-the-kernel-on-a-ubuntu-host">this stackexchange answer</a>):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install git ncurses-dev make gcc-arm-linux-gnueabi</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/petli/linux.git -b rpi-3.10-usb-sound-backport raspi-linux</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd raspi-linux
</span><span class='line'>ssh pi@raspberrypi.local zcat /proc/config.gz &gt; .config</span></code></pre></td></tr></table></div></figure>


<p>Note that I had to set VirtualBox to &ldquo;bridged adapter&rdquo; mode in order to see the &lsquo;local&rsquo; devices on the network.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi- oldconfig</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi- menuconfig</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi- -j8
</span><span class='line'>make ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi- modules -j8</span></code></pre></td></tr></table></div></figure>


<p>NB. I configured VirtualBox to see as 8 cores for <code>-jN</code> to produce a speedup.</p>

<p>That&hellip;. was straightforward.</p>

<p>Now to install it on the Pi. I&rsquo;ll just take my SD card and mount it on the Ubuntu host for this. This required installing the VirtualBox Extension Pack. And using a USB SD card reader since I couldn&rsquo;t figure out how to work the Mac&rsquo;s builtin reader in VirtualBox.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mv /media/BOOT/kernel.img /media/BOOT/kernel_old.img
</span><span class='line'>cp arch/arm/boot/Image /media/BOOT/kernel.img
</span><span class='line'>make ARCH=arm CROSS_COMPILE=/usr/bin/arm-linux-gnueabi-  INSTALL_MOD_PATH=~/modules modules_install
</span><span class='line'>sudo cp -r ~/modules/lib/* /media/root/lib/</span></code></pre></td></tr></table></div></figure>


<p>Upon booting I got some errors about &ldquo;<code>disagrees about version of symbol module_layout</code>&rdquo;. This made no sense, as modinfo showed the same version as <code>uname -a</code>, but then I added <code>gcc</code> to the <code>make-modules-install</code> option (this had previously ended in &ldquo;<code>-</code>&rdquo; like I would have expected), and made sure all modules were owned and writable only by root. That combination appeared to work (I was less than scientific in doing both at once.)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[(Not) Compiling a Raspberry Pi Kernel on OSX]]></title>
    <link href="http://crowding.github.io/blog/2014/04/15/compiling-a-raspberry-pi-kernel-on-osx/"/>
    <updated>2014-04-15T00:53:35-07:00</updated>
    <id>http://crowding.github.io/blog/2014/04/15/compiling-a-raspberry-pi-kernel-on-osx</id>
    <content type="html"><![CDATA[<p>One thing leads to another and suddenly you want to compile a new Raspberry Pi kernel, and your most convenient host is a Mac.</p>

<p>I started with <a href="http://www.jaredwolff.com/blog/cross-compiling-on-mac-osx-for-raspberry-pi/">some existing notes</a> about this &mdash;  but I found they needed some tweaking and some updates have happened which make things a little easier.</p>

<p>I&rsquo;m using crosstool-ng from Homebrew on OS X 10.9.</p>

<h1>Instructions</h1>

<h2>Install packages</h2>

<p>These are the packages I needed from Homebrew.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew tap homebrew/versions
</span><span class='line'>brew install gcc48
</span><span class='line'>brew install crosstool-ng
</span><span class='line'>brew tap homebrew/dupes
</span><span class='line'>brew install grep
</span><span class='line'>brew install gettext
</span><span class='line'>brew link --force gettext
</span><span class='line'>brew install ncurses
</span><span class='line'>brew link --force ncurses</span></code></pre></td></tr></table></div></figure>


<p>Note that <code>link --force</code> is not a particularly nice thing to do, and will (e.g.) prevent you from reinstalling crosstool-ng without uninstalling gettext first. But it appears to be necessary, as eglibc build fails without it (and I don&rsquo;t understand if there&rsquo;s an option that will let me specity gettext&rsquo;s location to eglibc)</p>

<h2>Make crosstools use GNU grep</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmod u+w /usr/local/Cellar/crosstool-ng/1.19.0/lib/ct-ng.1.19.0/paths.sh</span></code></pre></td></tr></table></div></figure>


<p>Edit <code>paths.sh</code>, changing the line about <code>grep</code> to read:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>export grep="/usr/local/bin/ggrep"</span></code></pre></td></tr></table></div></figure>


<p>(Is there a user-level config way to do this w/o poking around in the Homebrew cellar?)</p>

<h2>Create disk images</h2>

<p>Crosstools needs case-sensitive file systems to work on, we&rsquo;ll create two images, one to compile in and one to host the binaries.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~
</span><span class='line'>mkdir xtools-images
</span><span class='line'>cd xtools-images
</span><span class='line'>hdiutil create -size 6g \
</span><span class='line'>   -attach -type SPARSE -fs 'Case-sensitive Journaled HFS+' \
</span><span class='line'>   -volname xtools-build-env xtools-build-env
</span><span class='line'>hdiutil create -size 500m \
</span><span class='line'>   -attach -type SPARSE -fs 'Case-sensitive Journaled HFS+' \
</span><span class='line'>   -volname xtools xtools</span></code></pre></td></tr></table></div></figure>


<h2>Set up crosstools-ng</h2>

<p>Thanks to <a href="https://github.com/Kentzo/armv6-rpi-linux-gnueabihf">Kentzo</a> there is a Raspberry Pi configuration already in <code>crosstools-ng</code> in Homebrew, and there only need minor adjustments.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /Volumes/xtools-build-env/
</span><span class='line'>ct-ng armv6-rpi-linux-gnueabi</span></code></pre></td></tr></table></div></figure>


<p>Now extract this repository onto the drive image. It contains a <code>.config</code> file and a couple of patches.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone homeGit/peter/raspberry-pi-osx-crosstools-config .</span></code></pre></td></tr></table></div></figure>


<p>Then inspect the configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ct-ng menuconfig</span></code></pre></td></tr></table></div></figure>


<p>Check that all the paths under &ldquo;Paths&rdquo; point to somewhere logical (mounted on your disk images)</p>

<p>For extra speed, set &ldquo;Paths::Build behavior::number of parallel jobs&rdquo; to twice your number of cores. This also means you will need to also up the <code>ulimit</code> before building. (If there are weird errors about no rules to make targets related to language localization, you probably forgot to do this.) So now do</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ulimit -n 1024
</span><span class='line'>ct-ng build</span></code></pre></td></tr></table></div></figure>


<p>Hopefully this will work.</p>

<h2>Test the compiler</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cat &gt; test.c
</span><span class='line'>#include &lt;stdio.h&gt;
</span><span class='line'>int main() { printf("Hello, world!\n"); return 0; }</span></code></pre></td></tr></table></div></figure>


<p>(press ctrl-d to finish)</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/Volumes/xtools/armv6-rpi-linux-gnueabi/bin/armv6-rpi-linux-gnueabi-gcc -o test test.c</span></code></pre></td></tr></table></div></figure>


<p>Copy <code>test</code> over to your RPi and try running it.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>scp test pi@raspberrypi.local:
</span><span class='line'>ssh pi@raspberrypi.local /home/pi/test</span></code></pre></td></tr></table></div></figure>


<h1>Compiling a Kernel</h1>

<p>Well this is what I signed up for.</p>

<p>I wanted to build the kernel described <a href="https://github.com/petli/linux/tree/rpi-3.10-usb-sound-backport">here</a>.</p>

<p>I&rsquo;m cribbing from <a href="http://akanto.wordpress.com/2012/09/25/cross-compiling-kernel-for-raspberry-pi-on-fedora-17-part-1/">these</a> notes.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /Volumes/xtools-build-env/
</span><span class='line'>git clone https://github.com/petli/linux.git -b rpi-3.10-usb-sound-backport</span></code></pre></td></tr></table></div></figure>


<p>Copy the existing config.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>scp pi@raspberrypi.local:/proc/config.gz ./linux-config.gz
</span><span class='line'>gunzip linux-config.gz
</span><span class='line'>cp linux-config linux/.config</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make ARCH=arm CROSS_COMPILE=/Volumes/xtools/armv6-rpi-linux-gnueabi/bin/armv6-rpi-linux-gnueabi- oldconfig</span></code></pre></td></tr></table></div></figure>


<p><code>menuconfig</code> doersn&rsquo;t work for me because of some <code>ncurses</code> problem but there is <code>make nconfig</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make ARCH=arm CROSS_COMPILE=/Volumes/xtools/armv6-rpi-linux-gnueabi/bin/armv6-rpi-linux-gnueabi- nconfig</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>make ARCH=arm CROSS_COMPILE=/Volumes/xtools/armv6-rpi-linux-gnueabi/bin/armv6-rpi-linux-gnueabi- nconfig</span></code></pre></td></tr></table></div></figure>


<p>Now it is complaining about lack of &ldquo;elf.h&rdquo; Where is it looking for elf.h?</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo cp ../elf.h ../elftypes.h /usr/include
</span><span class='line'> 
</span><span class='line'>brew install libelf
</span><span class='line'>sudo ln -s /usr/local/include/libelf /usr/include/libelf</span></code></pre></td></tr></table></div></figure>


<p>&hellip; and some other advice from the internet, which didn&rsquo;t work either. It&rsquo;s not the &lsquo;echo&rsquo; problem, as that&rsquo;s been long fixed.</p>

<h1>Giving up threshold reached</h1>

<p>&hellip;. oh but adjusting Linux enough to compile in an OSX environment is going to be bad. gonna investigate just installing an Ubuntu VM under VirtualBox and compiling there</p>

<p>honestly a kernel compile on the Pi itself would have finished by now</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Best Emacs on OS X]]></title>
    <link href="http://crowding.github.io/blog/2014/04/06/the-best-emacs/"/>
    <updated>2014-04-06T12:40:21-07:00</updated>
    <id>http://crowding.github.io/blog/2014/04/06/the-best-emacs</id>
    <content type="html"><![CDATA[<p>My favorite version of Emacs on OS X is the <a href="">branch by Yamamoto Mitsuharu</a>. It has improved font rendering, better color calibration and a real full screen mode.</p>

<p>Installation is easy using Homebrew:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew tap railwaycat/emacsmacport
</span><span class='line'>brew install emacs-mac
</span><span class='line'>brew linkapps emacs-mac</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress]]></title>
    <link href="http://crowding.github.io/blog/2014/04/01/octopress/"/>
    <updated>2014-04-01T13:18:28-07:00</updated>
    <id>http://crowding.github.io/blog/2014/04/01/octopress</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Enabling Subpixel Rendering on Mac OS]]></title>
    <link href="http://crowding.github.io/blog/2014/03/29/enabling-subpixel/"/>
    <updated>2014-03-29T14:12:53-07:00</updated>
    <id>http://crowding.github.io/blog/2014/03/29/enabling-subpixel</id>
    <content type="html"><![CDATA[<p>I have one of those generic Korean 27&#8221; LCD monitors. It&rsquo;s nice, but Mac OS doesn&rsquo;t recognize it enough to enable subpixel font rendering. Here&rsquo;s how to fix it on OS X 10.6.8, via <a href="http://hints.macworld.com/article.php?story=20090828224632809">MaxOSXHints</a>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>defaults -currentHost write -globalDomain AppleFontSmoothing -int 2</span></code></pre></td></tr></table></div></figure>


<p>Especially with a nice font like Source Code Pro, it makes a perceptible difference in clarity.</p>

<p>Related: <a href="http://www.rastertragedy.com/">A longer web page about font rendering than you probably want to read.</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Version Controlled Home Directory With Vcsh]]></title>
    <link href="http://crowding.github.io/blog/2014/03/29/vc-home/"/>
    <updated>2014-03-29T13:25:03-07:00</updated>
    <id>http://crowding.github.io/blog/2014/03/29/vc-home</id>
    <content type="html"><![CDATA[<p>I&rsquo;ve been keeping all my .dotfiles in a Git repository. Since I&rsquo;m keeping <em>all</em> of them, it&rsquo;s become a big mess. I also had little success with maintaining diverging branches to work on different computers (e.g. Mac vs. Linux, Emacs23 versus Emacs24) while keeping the common. you-d think that exchanging merge operations between branches would work, but actually you need to be constantly rebasing, and Git doesn&rsquo;t have any way of keeping track of what was a rebase of what (which is half the problem with Git) and it&rsquo;s a mess.</p>

<p>I still wonder if maybe darcs would be a better model for VCS home &mdash; it would certainly seem better to the always-rebase school of moving branches in sync.</p>

<p>However, <a href="https://github.com/RichiH/vcsh">vcsh</a> seems to approach at least one aspect of the problem, whcih is to keep different pieces of your mess of config files under differetn headings. So let&rsquo;s see about starting to use that.</p>

<p>Download: It&rsquo;s in Homebrew and Debian, so just brew or apt-get as appropriate.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/RichiH/vcsh.git</span></code></pre></td></tr></table></div></figure>


<p>First question is does it support tracking things scattered around <code>/etc</code> and so on? It would be nice to have backups for &ldquo;software configurations&rdquo; set up on glibal servers too.</p>

<p>To start with, I went to <a href="hosting_git_on_your_user_account">gitolite</a> and added some space for wild config repositories:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>repo configs/.*
</span><span class='line'>    C     = peter
</span><span class='line'>    RW+D  = peter
</span><span class='line'>
</span><span class='line'>repo gobal_configs/.*
</span><span class='line'>    C     = peter
</span><span class='line'>    RW+D  = peter</span></code></pre></td></tr></table></div></figure>


<p>The tutorial for <code>vcsh</code> is located at <code>/usr/doc/vcsh/README.md.gz</code>. For my home directory I started with the &ldquo;template&rdquo; approach, clonign the example MR config to my own server:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vcsh clone git://github.com/RichiH/vcsh_mr_template.git mr
</span><span class='line'>vcsh enter mr
</span><span class='line'>git remote rm origin
</span><span class='line'>git remote add origin homeGit:configs/mr
</span><span class='line'>git fetch
</span><span class='line'>git push origin master
</span><span class='line'>git branch --set-upstream master origin/master
</span><span class='line'>exit</span></code></pre></td></tr></table></div></figure>


<p>I&rsquo;ll start by making a repo for my my SSH public/authorized keys files. I recently decided not to share private keys between computers and regenerated a new private key on each, so this is a good opportunity to keep the authorized keys straight.</p>

<p>So, as far as I can tell, this is how you add a new config repo:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vcsh init ssh
</span><span class='line'>vcsh ssh add .ssh/authorized_keys .ssh/config .ssh/*.pub
</span><span class='line'>vcsh ssh commit
</span><span class='line'>vcsh run ssh git remote add origin homeGit:configs/ssh
</span><span class='line'>vcsh ssh push origin master
</span><span class='line'>cd .config/mr/available.d/
</span><span class='line'>cp mr.vcsh ssh.vcsh
</span><span class='line'>emacs ssh.vcsh #change the URL
</span><span class='line'>cp ssh.vcsh ../config.d
</span><span class='line'>vcsh mr add ssh.vcsh ../config.d/ssh.vcsh
</span><span class='line'>vcsh mr commit
</span><span class='line'>vcsh mr push</span></code></pre></td></tr></table></div></figure>


<p>Wow, really that involved? Twelve damn commands, leaving off one of which does weird things? Color me dubious about this scheme. And there are eight billion untracked files every time making it impossible to see files you don&rsquo;t have under control but should &mdash; can all repos share a .gitignore or what?</p>

<p>Why doesn&rsquo;t &ldquo;vcsh init ssh&rdquo; do like 90% of this?</p>

<p>This is supposed to be easier than symlinking scripts?</p>

<p>Anyhow, the capstone that pushed me from &ldquo;dubious&rdquo; to &ldquo;kill it with fire&rdquo; was this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ vcsh mr commit -m "Added ssh to config dir"
</span><span class='line'>error: pathspec 'ssh' did not match any file(s) known to git.
</span><span class='line'>error: pathspec 'to' did not match any file(s) known to git.
</span><span class='line'>error: pathspec 'config' did not match any file(s) known to git.
</span><span class='line'>error: pathspec 'dir' did not match any file(s) known to git.</span></code></pre></td></tr></table></div></figure>


<p>COMMAND LINE ARGUMENTS.
THEY CAN HAVE SPACES IN THEM.
NO, REALLY, <em>THEY CAN.</em>
JUST BECAUSE YOU WRITE YOUR STUPID THING IN SHELL IS NO EXCUSE FOR THIS SHIT.</p>

<p>Really, tearing apart arguments that were quoted perfectly well is fucking unacceptable for any kind of UNIX utility written after the &lsquo;80s.</p>

<p>Bye now.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh homeGit D unlock configs/mr
</span><span class='line'>ssh homeGit D unlock configs/ssh
</span><span class='line'>ssh homeGit D rm configs/mr
</span><span class='line'>ssh homeGit D rm configs/ssh
</span><span class='line'>sudo apt-get remove mr vcsh
</span><span class='line'>rm -rf .config/mr .config/vcsh .mrconfig</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello World]]></title>
    <link href="http://crowding.github.io/blog/2014/03/24/hello-world/"/>
    <updated>2014-03-24T12:23:11-07:00</updated>
    <id>http://crowding.github.io/blog/2014/03/24/hello-world</id>
    <content type="html"><![CDATA[<p>Octopress. A blogging framework for people who want to do it the hard way?</p>

<p>Hello Octopress.</p>

<p>I saw an an interesting post about <a href="http://www.railsonmaui.com/blog/2014/03/05/octopress-setup-with-github-and-org-mode-v2/">driving Octopress from Org-mode</a>, but I&rsquo;m not sure about diving down the Org-mode rabbit hole yet. So&hellip; making a web page with a static site generator with Ruby? Maybe it will turn out better than my attempts to do so with Perl in the late &lsquo;90s.</p>

<p>The thing is that I&rsquo;m not particularly interested in my notes being &lsquo;a voice&rsquo; on the internet or whatever, but it would be nice if they were Google-visible.</p>
]]></content>
  </entry>
  
</feed>
